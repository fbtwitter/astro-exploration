---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/page.astro';

const blogPosts = await getCollection('blog');
---

<Layout>
	<section class="blog-entries">
		{
			blogPosts.map((post) => {
				return (
					<div class="post">
						<h2>
							<a href={`/blog/${post.slug}`}>{post.data.title}</a>
						</h2>
						<time datetime={post.data.date.toISOString()}>
							{post.data.date.toDateString()}
						</time>
						<p>{post.data.description}</p>
						<a href={`/blog/${post.slug}`}>read post</a>
					</div>
				);
			})
		}
	</section>

	<p class="feed">
		<a href="/rss.xml">
			<span role="img" aria-label="satellite dish">ðŸ“¡</span>
			<span class="link-text">Subscribe to the RSS Feed</span>
		</a>
	</p>
</Layout>
